# syntax=docker/dockerfile:1
ARG NODE_VERSION=20
# -------- Test stage: includes dev dependencies --------
FROM node:${NODE_VERSION}-alpine AS test
WORKDIR /app
RUN apk add --no-cache python3 make g++
COPY package*.json ./
RUN npm ci
COPY . .
ENV NODE_ENV=test
EXPOSE 8888